// ==========================[ Includes ]===============================
#include "fifo.h"
// ======================[ Public functions ]===============================
void fifoInit(fifoHandler_t *f, uint8_t *buffer, uint16_t size){
	f->buffer = buffer;
	f->size = size;
	f->head = 0;
	f->tail = 0;
	return;
}

bool fifoPush(fifoHandler_t *f, uint8_t data){
	uint16_t nextHead = (f->head + 1) % f->size;
	if(nextHead == f->tail){
		return false;								//fifo buffer is full
	}

	f->buffer[f->head] = data;
	f->head = nextHead;
	return true;
}

bool fifoPushBuffer(fifoHandler_t *f, const uint8_t *data, uint16_t size){
	uint16_t availableSpace = f->size - fifoAvailable(f) - 1;

	//Check if there is enough space
	if(size > availableSpace){
		return false; 								//There isn't enough space
	}

	//Push the values into the fifo buffer
	for(uint16_t i = 0; i < size; i++){
		f->buffer[f->head] = data[i];
		f->head = (f->head + 1) % f->size;
	}
	return true;
}

bool fifoPop(fifoHandler_t *f, uint8_t *data){
	if(f->head == f->tail){
		return false;
	}
}
